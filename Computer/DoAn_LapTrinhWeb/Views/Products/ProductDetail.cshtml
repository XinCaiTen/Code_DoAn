@using DoAn_LapTrinhWeb.Models
@model Product
@using DoAn_LapTrinhWeb.Common
@{
    ViewBag.Title = Model.product_name;
    ViewBag.ImageURL = Model.image;
    ViewBag.Keyword = Model.product_name;
    ViewBag.Decription = "";
    ViewBag.Tag = Model.title_seo;
    Layout = "~/Views/Shared/Main_Layout.cshtml";
    <!--relatedproduct | path: "action ProductDetail" - controller"Products"-->
    //hiển thị nhựng sản phẩm liên quan đến loại sp đó "vd: laptop gaming, thì sẽ hiển thị nội dung liên quan đến laptop gaming
    var relatedproduct = (List<DoAn_LapTrinhWeb.Models.Product>)ViewBag.relatedproduct;
}
@section scripts{
    <!--chia sẻ ảnh, bài viết, sản phẩm lên fb, instagram,...-->
    <script src="~/Scripts/my_js/button_share_fb.js"></script>
    <!--xử lý sự kiện thêm sản phẩm-->
    <script src="~/Scripts/my_js/product/detail.js"></script>
    <!--custom product images detail theo dạng slider sử dụng kèm carousel.min.js-->
    <script src="~/Scripts/my_js/product_detail.js"></script>
}
<!--begin::Section-->
<div class="section product_detail">
    <!--begin::Container-->
    <div class="container">
        <!--begin::Breadcrumb-->
        <div class="breadcrumb1">
            <ul class="breadcrumb__list">
                <li><a href="/"><i aria-hidden="true" class="fa fa-home"></i></a> <i aria-hidden="true" class="far fa-angle-right"></i></li>
                <li><a href="@Url.Action("Index","Home")">Trang chủ</a> <i aria-hidden="true" class="far fa-angle-right"></i></li>
                <li><a href="/san-pham/phan-loai/@SlugGenerator.SlugGenerator.GenerateSlug(Model.Genre.genre_name)-@Model.genre_id">@ViewBag.Genreproduct</a> <i aria-hidden="true" class="far fa-angle-right"></i></li>
                <li class=" breadcrumb_active"><a href="">@Model.product_name</a></li>
            </ul>
        </div>
        <!--end::Breadcrumb-->
        <!--begin::Row-->
        <div class="row boderproductdetail mb-30px">
            <!--begin::Col-->
            <div class="col-md-12">
                <!--begin::Row-->
                <div class="row">
                    <!--begin::Col-->
                    <div class="col-md-5 p-3 h_pduct_detail">
                        <!--begin::product detail images-->
                        @foreach (var pdimg in ViewBag.imageproduct)
                        {
                            if (pdimg.product_id == Model.product_id)
                            {
                                <!--"data-fslightbox" using script full sreen images | path: /Scripts/fslightbox.js -->
                                <!--id="slider", id="thumb" |path:Scripts/my_js/product_detail.js-->
                                <div id="slider" class="owl-carousel product-slider position-md-relative">
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (Model.image != null)
                                        {
                                            <a data-fslightbox href="@Model.image">
                                                <img src="@Model.image" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_1 != null)
                                        {
                                            <a data-fslightbox href="@pdimg.image_1">
                                                <img src="@pdimg.image_1" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_2 != null)
                                        {
                                            <a data-fslightbox href="@pdimg.image_2">
                                                <img src="@pdimg.image_2" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_3 != null)
                                        {
                                            <a data-fslightbox href="@pdimg.image_3">
                                                <img src="@pdimg.image_3" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_4 != null)
                                        {
                                            <a data-fslightbox href="@pdimg.image_4">
                                                <img src="@pdimg.image_4" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_5 != null)
                                        {
                                            <a data-fslightbox href="@pdimg.image_5">
                                                <img src="@pdimg.image_5" />
                                            </a>
                                        }
                                    </div>
                                    <!--end::Pic-->
                                </div>
                                <!--begin::thumbnail carousel slider-->
                                <div id="thumb" class="owl-carousel product-thumb">
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (Model.image != null)
                                        {
                                            <img src="@Model.image" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_1 != null)
                                        {
                                            <img src="@pdimg.image_1" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_2 != null)
                                        {
                                            <img src="@pdimg.image_2" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_3 != null)
                                        {
                                            <img src="@pdimg.image_3" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_4 != null)
                                        {
                                            <img src="@pdimg.image_4" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                    <!--begin::Pic-->
                                    <div class="item">
                                        @if (pdimg.image_5 != null)
                                        {
                                            <img src="@pdimg.image_5" />
                                        }
                                    </div>
                                    <!--end::Pic-->
                                </div>
                                <!--end::thumbnail carousel slider-->
                            }
                        }
                        <!--end::product detail images-->
                    </div>
                    <!--begin::Col-->
                    <div class="col-md-7 p-3">
                        <!--begin::Row-->
                        <div class="row">
                            <!--begin::Product Name-->
                            <div class="product-heading">
                                <p class="name_product_detail">@Model.product_name </p>
                            </div>
                            <!--end::Product Name-->
                            <!--begin::Product ID-->
                            <div class="d-flex brand_sku">
                                <span>Thương hiệu:</span>
                                <a class="brand_pdtdetail" href="/san-pham/thuong-hieu/@SlugGenerator.SlugGenerator.GenerateSlug(Model.Brand.brand_name)-@Model.brand_id">@Model.Brand.brand_name<span class="spacing_word"></span></a>
                                <span class="">Mã SP: @Model.product_id</span><br>
                            </div>
                            <!--end::Product ID-->
                            <!--begin::Product Detail Price-->
                            <div class="price_product_detail">
                                @if (Model.Discount != null)
                                {
                                    if (Model.Discount.discount_start < DateTime.Now && Model.Discount.discount_end > DateTime.Now && Model.Discount.status.Trim() == "1")
                                    {
                                        <span class="old_price_detail"><del>@Model.price.ToString("#,###₫")</del></span>
                                        <span class="new_price_detail">@((Model.price - Model.Discount.discount_price).ToString("#,0₫"))</span>
                                    }
                                    else
                                    {
                                        <span class="new_price_detail">@Model.price.ToString("#,###₫")</span>
                                    }
                                }
                                else
                                {
                                    <span class="new_price_detail">@Model.price.ToString("#,###₫")</span>
                                }
                                <br />
                                <!--begin::Product Star-->
                                <span class="rating me-2">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                    <i class="fa fa-star" aria-hidden="true"></i> 
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                    <i class="fa fa-star" aria-hidden="true"></i> 
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                </span>
                                <!--begin::Product Star-->
                                <span class="review">(@ViewBag.CountFeedback Đánh giá)</span>
                            </div>
                            <!--end::Product Detail Price-->
                            <div class="mb-2 limit_specs">
                                @Html.Raw(Model.specification)
                            </div>
                            <!--begin::Discount-->
                            <div class="pro-special-offer-container">
                                <div class="spec-title d-flex align-items-center justify-content-between">
                                    <div class="spec-price font-weight-bold">
                                        KHUYẾN MÃI
                                    </div>
                                </div>
                                <ul class="ul">
                                    @foreach (var banner_detail in ViewBag.BannerDetail)
                                    {
                                        if (banner_detail.product_id == Model.product_id)
                                        {
                                            foreach (var banner in ViewBag.Banner)
                                            {

                                                if (banner.banner_id == banner_detail.banner_id)
                                                {
                                                    <li>
                                                        <span class="text">
                                                            @if (banner.description == null || banner.description == "")
                                                            {
                                                                <span>@banner.banner_name - <a class="font_roboto_medium text-danger" href="/khuyen-mai/@SlugGenerator.SlugGenerator.GenerateSlug(banner.banner_name)-@banner.banner_id">Xem danh sách khuyến mãi tại đây</a></span>
                                                            }
                                                            else
                                                            {
                                                                <span> @banner.description -  <a class="font_roboto_medium text-danger" href="/khuyen-mai/@SlugGenerator.SlugGenerator.GenerateSlug(banner.banner_name)-@banner.banner_id">Xem danh sách khuyến mãi tại đây</a></span>
                                                            }
                                                        </span>
                                                    </li>
                                                }
                                            }
                                        }
                                    }
                                </ul>
                            </div>
                            <!--end::Discount-->
                            <!--begin::Detail Content-->
                            <div class="detail-contant">
                                <!--begin::Quantity-->
                                <div>
                                    @if (Model.quantity == "4" || Model.quantity == "5" || Model.quantity == "6" || Model.quantity == "7" || Model.quantity == "8" || Model.quantity == "9" || Model.quantity == "10")
                                    {
                                        <p class="status_stock"><span class="status status2"><i aria-hidden="true" class="fa fa-circle"></i>Còn ít</span></p>
                                    }
                                    else if (Model.quantity == "3")
                                    {
                                        <p class="status_stock"><span class="status status3"><i aria-hidden="true" class="fa fa-circle"></i>Còn 3 sản phẩm</span></p>
                                    }
                                    else if (Model.quantity == "2")
                                    {
                                        <p class="status_stock"><span class="status status3"><i aria-hidden="true" class="fa fa-circle"></i>Còn 2 sản phẩm</span></p>
                                    }
                                    else if (Model.quantity == "1")
                                    {
                                        <p class="status_stock"><span class="status status3"><i aria-hidden="true" class="fa fa-circle"></i>Còn 1 sản phẩm</span></p>
                                    }
                                    else if (Model.quantity == "0") //nếu quantity = 0 thì hiển thị hết hàng
                                    {
                                        <p class="status_stock"><span class="status status4"><i aria-hidden="true" class="fa fa-circle"></i>Hết hàng</span></p>
                                    }
                                    else //ngược lại các điều kiện trên thì hiển thị còn hàng
                                    {
                                        <p class="status_stock"><span class="status status1"><i aria-hidden="true" class="fa fa-circle"></i>Còn hàng</span></p>
                                    }
                                </div>
                                <!--end::Quantity-->
                                <!--begin::Form-->
                                <form class="cart" method="post" action="#">
                                    <!--nếu là quyền quản trị thì sẽ không được mua hàng, chỉ quyền người dùng mới được phép mua hàng-->
                                    @if (Model.quantity != "0")
                                    {
                                        <!--"Const.ROLE..." | path: /Common/Const.cs-->
                                        if (User.IsInRole(Const.ROLE_ADMIN_NAME) || User.IsInRole(Const.ROLE_EDITOR_NAME) || User.IsInRole(Const.ROLE_MODERATOR_NAME)) //Const.ROLE_ADMIN_NAME chỉ là đặt tên cho role thôi,trong databasse "0" là admin "1" là user(nguòi dùng)
                                        {
                                            <!--begin::Add to Cart-->
                                            <div class="quantity" style="margin-right:5px;">
                                                <input step="0" min="0" max="@Model.quantity" name="quantity" value="0" title="Số lượng" class="input-text qty text" type="number" readonly>
                                            </div>
                                            //nếu bạn là admin sẽ hiển thị nút này số âm
                                            <a class="btn bg-danger">For User</a>
                                            <!--end::Add to Cart-->
                                        }
                                        else
                                        {
                                            <!--begin::Add to Cart-->
                                            //đã ràng buộc không cho nhập số âm 
                                            <div class="quantity">
                                                <input step="1" min="1" max="@Model.quantity" name="quantity" value="1" oninput="validity.valid || (value = '');" title="số lượng" class="input-text qty text" size="4" type="number">
                                            </div>
                                            //nếu bạn là user sẽ thêm được số lượng", id="btnAddToCart" | path: ~/Scripts/my_js/product/detail.js
                                            <button type="button" id="btnAddToCart" data-id="@Model.product_id" class="btn bg-button">Thêm vào giỏ</button>
                                            <!--end::Add to Cart-->
                                        }
                                    }
                                    else
                                    {
                                        <!--begin::Add to Cart-->
                                        <div class="quantity">
                                            <input min="0" max="0" name="quantity" value="0" title="số lượng" class="input-text qty text" size="4" type="number">
                                        </div>
                                        // nếu số lượng của sản phẩm = 0 sẽ hiện lên button "Liên hệ", id="btnAddToCart" | path: ~/Scripts/my_js/product/detail.js
                                        <a class="btn bg-button ms-2" target="_blank" href="https://www.messenger.com/t/109633994706435/">Liên hệ</a>
                                        <!--end::Add to Cart-->
                                    }
                                </form>
                                <!--begin::Form-->
                                <!--begin::Button Share-->
                                <div class="share-post">
                                    <a href="#" class="share-text">Chia sẻ:</a>
                                    <ul class="social_icons">
                                        <!--id="fb-share-button" | path: /Scripts/my_js/button_share_fb.js-->
                                        <li><a href="#" id="fb-share-button"><img src="~/Images/svg/brand-logos/facebook-4.svg" class="img_button_share" /></a></li>
                                        <li><a href="#" ><img src="~/Images/svg/brand-logos/instagram-2-1.svg" class="img_button_share" /></a></li>
                                        <li><a href="#"> <img src="~/Images/svg/brand-logos/pinterest-p.svg" class="img_button_share" /></a></li>
                                        <li><a href="#"><img src="~/Images/svg/brand-logos/github.svg" class="img_button_share" /></a></li>
                                    </ul>
                                </div>
                                <!--end::Button Share-->
                            </div>
                            <!--end::Detail Content-->
                        </div>
                        <!--end::Row-->
                    </div>
                    <!--end::Col-->
                </div>
                <!--end:Row-->
            </div>
            <!--end product-->
        </div>
        <!--end::Row-->
        <!--begin::View Product decription-->
        <div class="modal fade popup_detail_desc" id="popupmodal_detail_decription" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <!--begin::Modal Content-->
                <div class="modal-content">
                    <!--begin::Modal Header-->
                    <div class="modal-header">
                        <p class="modal-title center h6" id="exampleModalLongTitle">Mô tả sản phẩm: @Model.product_name</p>
                        <a href="#" class="close bg-transparent" data-dismiss="modal" aria-label="Close">
                            <span class="material-icons" aria-hidden="true">close</span>
                        </a>
                    </div>
                    <!--end::Modal Header-->
                    <div class="modal-body detail_decs_product">
                        @Html.Raw(Model.description)
                    </div>
                    <!--begin::Modal Footer-->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Đóng</button>
                    </div>
                    <!--begin::Modal Footer-->
                </div>
                <!--end::Modal Content-->
            </div>
        </div>
        <!--end::View Product decription-->
        <!--begin::Row-->
        <div class="row boderproductdetail pd_productdetail">
            <div class="col-md-12">
                <div class="full">
                    <!--begin::Tab Bars-->
                    <div class="tab_bar_section">
                        <!--begin::Nav Tabs-->
                        <ul class="nav nav-tabs" role="tablist">
                            <!--begin::Nav Item-->
                            <li class="nav-item"> <a class="nav-link active" data-toggle="tab" href="#description">Mô tả sản phẩm</a> </li>
                            <li class="nav-item"> <a class="nav-link " data-toggle="tab" href="#specs">Thông số kĩ thuật</a> </li>
                            <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#reviews">Đánh giá (@ViewBag.CountFeedback)</a> </li>
                            <!--end::Nav Item-->
                        </ul>
                        <!--end::Nav Tabs-->
                        <!--begin::Tab Content-->
                        <div class="tab-content">
                            <!--begin::Tab Panel-->
                            <div id="description" class="tab-pane active">
                                @if (Model.description == "" || Model.description == null)
                                {
                                    <div>Đang cập nhật</div>
                                }
                                else
                                {
                                    <!--begin::Decription-->
                                    <div class="product_desc">
                                        @Html.Raw(Model.description)
                                    </div>
                                    <!--end::Decription-->
                                    <div class="bg-article"></div>
                                    <!--begin::View More Decription-->
                                    <a href="#" data-toggle="modal" data-target="#popupmodal_detail_decription">
                                        <span class="btn-detail btn-short-spec not-have-instruction d-flex center btn_detail_decription">
                                            <span style="font-family: Roboto-Regular;margin-top: 7px;">Xem thêm nội dung</span><span class="material-icons">keyboard_arrow_down</span>
                                        </span>
                                    </a>
                                    <!--end::View More Decription-->
                                }
                            </div>
                            <!--end::Tab Panel-->
                            <!--begin::Tab Panel-->
                            <div id="specs" class="tab-pane fade">
                                <div id="specs" class="tab-pane ">
                                    @if (Model.specification == "" || Model.specification == null)
                                    {
                                        <div>Đang cập nhật</div>
                                    }
                                    else
                                    {
                                        <!--begin::Spectification-->
                                        <div class="product_desc">
                                            @Html.Raw(Model.specification)
                                        </div>
                                        <!--end::Spectification-->
                                    }
                                </div>
                            </div>
                            <!--end::Tab Panel-->
                            <!--begin::Tab Panel-->
                            <div id="reviews" class="tab-pane fade row">
                                <!--begin::Product Review-->
                                <div class="product_review col-lg-8">
                                    <h3>Đánh giá (@ViewBag.CountFeedback)</h3>
                                    @foreach (var fb in ViewBag.Feedbackid)
                                    {
                                        if (fb.product_id == Model.product_id)
                                        {
                                            foreach (var ac in @ViewBag.Accountfeedback)
                                            {
                                                if (ac.account_id == fb.account_id)
                                                {
                                                    <!--begin::Row-->
                                                    <div class="commant-text row">
                                                        <div class="col-lg-8">
                                                            <!--begin::User Name-->
                                                            <h5>@ac.Name</h5>
                                                            <!--end::User Name-->
                                                            <!--begin::Feedback Date-->
                                                            <p><span class="c_date">@fb.create_at.ToString("dd-MM-yyyy")</span></p>
                                                            <!--end::Feedback Date-->
                                                            <!--begin:Rating Star-->
                                                            <span class="rating">
                                                                @if (fb.rate_star == 0)
                                                                {
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                }
                                                                else if (fb.rate_star == 1)
                                                                {
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                }
                                                                else if (fb.rate_star == 2)
                                                                {
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                }
                                                                else if (fb.rate_star == 3)
                                                                {
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                }
                                                                else if (fb.rate_star == 4)
                                                                {
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                                                }
                                                                else if (fb.rate_star == 5)
                                                                {
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                                }
                                                            </span>
                                                            <!--end:Rating Star-->
                                                            <!--begin::Feedback Content-->
                                                            <p class="msg">
                                                                @fb.description
                                                            </p>
                                                            <!--end::Feedback Content-->
                                                        </div>
                                                    </div>
                                                    <!--end::Row-->
                                                }
                                            }
                                        }
                                    }

                                </div>
                                <!--begin::Row-->
                                <div class="col-lg-4">
                                    <div class="full review_bt_section">
                                        <a class="btn bg-button" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true" onclick="PopupModalRating()" aria-controls="collapseExample">Thêm nhận xét</a>
                                    </div>
                                    <div class="full">
                                        <div id="collapseExample" class="full collapse commant_box">
                                            <form accept-charset="UTF-8" action="index.html" method="post">
                                                <input id="ratings-hidden" name="rating" type="hidden">
                                                <textarea class="form-control animated" cols="50" id="new-review" name="comment" placeholder="Viết nhận xét của bạn tại đây..." required=""></textarea>
                                                <div class="full_bt center">
                                                    <button class="btn sqaure_bt w-15" type="submit">gửi</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!--end::Row-->
                                <!--end::Product Review-->
                            </div>
                            <!--end::Tab Panel-->
                        </div>
                        <!--end::Tab Content-->
                    </div>
                    <!--end::Tab Bars-->
                </div>
            </div>
        </div>
        <!--end::Row-->
        <!--begin::Row-->
        <div class="row boderproductdetail pd_relatedproduct">
            <!--begin:Row-->
            <div class="row">
                <!--begin::Col-->
                <div class="col-md-12">
                    <div class="full">
                        <!--begin:Title Head-->
                        <div class="main_heading related_product_heading">
                            <p class="h4">Xem thêm sản phẩm cùng dòng @Model.Genre.genre_name</p>
                        </div>
                        <!--end:Title Head-->
                    </div>
                </div>
                <!--end::Col-->
            </div>
            <!--end:Row-->
            @foreach (var item in relatedproduct)//hiển thị những sản phẩm liên quan
            {
                <!--begin::Col-->
                <div class="col-md-3 pb_relatedproduct">
                    <!--begin::Product List-->
                    <div class="product_list">
                        @if (item.Type == 1)
                        {
                            <a href="/laptop/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @if (item.Discount != null)
                                {
                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                    {
                                        <div class="bs-discount star mg_discount">
                                            <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                        </div>
                                    }
                                }
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"> </div> @*nếu không có ảnh sản phẩm sẽ hiển thị hình ảnh no-image của web site*@
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limit2line color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        else if (item.Type == 2)
                        {
                            <a href="/phu-kien/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @if (item.Discount != null)
                                {
                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                    {
                                        <div class="bs-discount star mg_discount">
                                            <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                        </div>
                                    }
                                }
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"> </div> @*nếu không có ảnh sản phẩm sẽ hiển thị hình ảnh no-image của web site*@
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limit2line color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        else if (item.Type == 3)
                        {
                            <a href="/man-hinh/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @if (item.Discount != null)
                                {
                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                    {
                                        <div class="bs-discount star mg_discount">
                                            <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                        </div>
                                    }
                                }
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"> </div> @*nếu không có ảnh sản phẩm sẽ hiển thị hình ảnh no-image của web site*@
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limit2line color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        else if (item.Type == 4)
                        {
                            <a href="/ban-ghe/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @if (item.Discount != null)
                                {
                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                    {
                                        <div class="bs-discount star mg_discount">
                                            <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                        </div>
                                    }
                                }
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"></div>
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limit2line color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        else if (item.Type == 5)
                        {
                            <a href="/linh-kien/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @if (item.Discount != null)
                                {
                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                    {
                                        <div class="bs-discount star mg_discount">
                                            <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                        </div>
                                    }
                                }
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"></div> 
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limit2line color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        else
                        {
                            <a href="/san-pham/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                @*href bạn có thể thay bằng href="@Url.Action("Productdetail", "Products", new { id = @item.product_id })"*@
                                <div class="product_img"> <img class="img-responsive" src="@item.image" alt="@item.product_name"></div> 
                                <div class="product_detail_btm">
                                    <!--begin::Product Name-->
                                    <div class="center">
                                        <p class="limitlinetext color_text_primary">@item.product_name</p>
                                    </div>
                                    <!--end::Product Name-->
                                </div>
                            </a>
                        }
                        <div class="product_detail_btm">
                            <div class="starratin">
                                <div class="center"> <i class="fa fa-star" aria-hidden="true"></i> <i class="fa fa-star" aria-hidden="true"></i> <i class="fa fa-star" aria-hidden="true"></i> <i class="fa fa-star" aria-hidden="true"></i> <i class="fa fa-star-o" aria-hidden="true"></i> </div>
                            </div>
                            <!--begin::Product Price-->
                            <div class="product_price">
                                <p>
                                    @if (item.Discount != null)
                                    {
                                        if ((item.Discount.discount_start < DateTime.Now && item.Discount.discount_end >= DateTime.Now) && item.Discount.status.Trim() == "1")//nếu ngày giảm giá bé hơn ngày hiện tài và ngày kết thúc phải lớn hơn hoặc bằng ngày hiện tại
                                        {
                                            <span class="old_price">@item.price.ToString("#,###₫")</span> <span class="new_price">@((item.price - item.Discount.discount_price).ToString("#,0₫"))</span>//hiển thị giá sau khi trừ khhuyến mãi
                                        }
                                        else
                                        {
                                            <span class="new_price">@item.price.ToString("#,###₫")</span>
                                        }
                                    }
                                    else
                                    {
                                        <span class="new_price">@item.price.ToString("#,###₫")</span>
                                    }
                                </p>
                            </div>
                            <!--end::Product Price-->
                        </div>
                    </div>
                    <!--end::Product List-->
                </div>
                <!--end::Col-->
            }
        </div>
        <!--end::Row-->
    </div>
    <!--end::Container-->
</div>
<!--end::section-->
