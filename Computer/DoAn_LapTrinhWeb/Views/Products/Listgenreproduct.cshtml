@using DoAn_LapTrinhWeb.Models;
@using PagedList.Mvc;
@model PagedList.PagedList<DoAn_LapTrinhWeb.Models.Product>
@{
    ViewBag.Title = "Danh mục: " + ViewBag.Genrename;
    ViewBag.ImageURL = "~/Images/ImagesCollection/thumbnail.jpg";
    Layout = "~/Views/Shared/Main_Layout.cshtml";
    string defaultImg = "/Content/Images/no-image.jpg";
    var listgenreproduct = (PagedList.PagedList<DoAn_LapTrinhWeb.Models.Product>)ViewBag.listgenreproduct;
}
<!--begin::Section-->
<div class="section product_list_main">
    <!--begin::Container-->
    <div class="container">
        <!--begin::Breadcrumb-->
        <div class="breadcrumb1">
            <ul class="breadcrumb__list">
                <li><a href="/"><i aria-hidden="true" class="fa fa-home"></i></a> <i aria-hidden="true" class="far fa-angle-right"></i></li>
                <li><a href="@Url.Action("Index", "Home")">Trang chủ</a> <i aria-hidden="true" class="far fa-angle-right"></i></li>
                <li><a href="#">@ViewBag.Genrename</a></li>
            </ul>
        </div>
        <!--end::Breadcrumb-->
        <!--begin::Row-->
        <div class="row boderproductdetail pd_listproduct">
            <div>
                <div>Có @ViewBag.Countproduct sản phẩm @ViewBag.Genrename</div>
            </div>
            <!--begin::Col-->
            <div class="col-md-12">
                <!--begin::Row-->
                <div class="row">
                    @if (listgenreproduct.Count == 0)
                    {
                        <div class="col">
                            <p class="h3 text-danger center">Không có sản phẩm</p>
                        </div>
                    }
                    else
                    {
                        foreach (var item in listgenreproduct)
                        {
                            <!--begin::Col-->
                            <div class="col-md-3 margin_bottom_30_all">
                                <!--begin::Product List-->
                                <div class="product_list">
                                    @if (item.Type == 1)
                                    {
                                        <a href="/laptop/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            @if (item.Discount != null)
                                            {
                                                if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                {
                                                    <div class="bs-discount star mg_discount">
                                                        <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                                    </div>
                                                }
                                            }
                                            <div class="product_img"> <img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"> </div> @*nếu không có ảnh sản phẩm sẽ hiển thị hình ảnh no-image của web site*@
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limitlinetext color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    else if (item.Type == 2)
                                    {
                                        <a href="/phu-kien/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            @if (item.Discount != null)
                                            {
                                                if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                {
                                                    <div class="bs-discount star mg_discount">
                                                        <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                                    </div>
                                                }
                                            }
                                            <div class="product_img"> <img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"></div> 
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limitlinetext color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    else if (item.Type == 3)
                                    {
                                        <a href="/man-hinh/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            @if (item.Discount != null)
                                            {
                                                if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                {
                                                    <div class="bs-discount star mg_discount">
                                                        <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                                    </div>
                                                }
                                            }
                                            <div class="product_img"> <img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"></div> 
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limit2line color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    else if (item.Type == 4)
                                    {
                                        <a href="/ban-ghe/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            @if (item.Discount != null)
                                            {
                                                if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                {
                                                    <div class="bs-discount star mg_discount">
                                                        <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                                    </div>
                                                }
                                            }
                                            <div class="product_img"> <img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"></div> 
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limit2line color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    else if (item.Type == 5)
                                    {
                                        <a href="/linh-kien/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            @if (item.Discount != null)
                                            {
                                                if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                {
                                                    <div class="bs-discount star mg_discount">
                                                        <span>-@((((item.price)/(item.price))-((item.price - item.Discount.discount_price)/(item.price))).ToString("0.00%"))</span>
                                                    </div>
                                                }
                                            }
                                            <div class="product_img"> <img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"></div>
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limitlinetext color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    else
                                    {
                                        <a href="/san-pham/@SlugGenerator.SlugGenerator.GenerateSlug(item.title_seo)-@item.product_id">
                                            <div class="product_img"><img class="img-responsive" src="@(item.image != null ? item.image : defaultImg)" alt="@item.product_name"></div>
                                            <div class="product_detail_btm">
                                                <div class="center">
                                                    <p class="limitlinetext color_text_primary">@item.product_name</p>
                                                </div>
                                            </div>
                                        </a>
                                    }
                                    <div class="product_detail_btm">
                                        <!--begin::Product Star-->
                                        <div class="starratin">
                                            <div class="center">
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                                <i class="fa fa-star" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <!--end::Product Star-->
                                        <!--begin::Product Price-->
                                        <div class="product_price">
                                            <p>
                                                @if (item.Discount != null)
                                                {
                                                    if (item.Discount.discount_start < DateTime.Now && item.Discount.discount_end > DateTime.Now && item.Discount.status.Trim() == "1")
                                                    {
                                                        <span class="old_price">@item.price.ToString("#,###₫")</span> <span class="new_price">@((item.price - item.Discount.discount_price).ToString("#,0 ₫"))</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="new_price">@item.price.ToString("#,###₫")</span>
                                                    }
                                                }
                                                else
                                                {
                                                    <span class="new_price">@item.price.ToString("#,###₫")</span>
                                                }
                                            </p>
                                        </div>
                                         <!--begin::Product Price-->
                                    </div>
                                </div>
                                 <!--end::Product List-->
                            </div>
                            <!--end::Col-->
                        }
                    }
                    <!--begin::Pagination-->
                    <div class="center mt-20px">
                    @Html.PagedListPager(listgenreproduct, page => Url.Action("Listgenreproduct", new { @page = page }), new PagedListRenderOptions
                    {
                        LinkToPreviousPageFormat = "‹",
                        LinkToNextPageFormat = "›",
                        DisplayLinkToFirstPage = PagedListDisplayMode.Never,
                        DisplayLinkToLastPage = PagedListDisplayMode.Never,
                        DisplayLinkToPreviousPage = PagedListDisplayMode.Always,
                        DisplayLinkToNextPage = PagedListDisplayMode.Always,
                        MaximumPageNumbersToDisplay = 5
                    })
                    </div>
                    <!--end::Pagination-->
                </div>
                <!--end::Row-->
            </div>
            <!--end::Col-->
        </div>
        <!--end::Row-->
    </div>
    <!--end::Container-->
</div>
<!--end::Section-->
